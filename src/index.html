<!DOCTYPE html>
<!--<html>
	<head>
		<script type="text/javascript"> window.location.href="index.php"; </script>
		<meta http-equiv="refresh" content="0; URL=index.php">
	</head>
</html>-->

<html>
	<head>
		<script type="text/javascript">
			var base_url = "http://localhost:8000/index.php";
			function callServer(url)
			{
				var response;
				var client;
				try
				{
					client = new XMLHttpRequest();
				}
				catch(e)
				{
					try
					{
						client = new ActiveXObject("Msxml2.XMLHTTP");
					}
					catch(e)
					{
						try
						{
							client = new ActiveXObject("Microsoft.XMLHTTP");
						}
						catch(e)
						{
							return;
						}
					}
				}
				//client.abort();

				client.onreadystatechange = function()
				{
					if(client.readyState == 4)
					{
						console.log("ready state = 4");
						console.log(client);
							response = client.responseText;
							if(response.length > 0)
								console.log(response);
							else
								console.log("response <= 0");
							console.log("client status " + client.status);
						if(client.status == 200)
						{
							console.log("status = 200");
						}
						delete client;
					}
				}
				client.open("GET", url, true);
				client.setRequestHeader("Content-type","application/x-www-form-urlencoded;charset=UTF-8");
				client.send(null);

				return response;
			}

			function showAllBikes()
			{
				var url = base_url + "/models";
				var response = this.callServer(url);
				console.log(response);
				document.getElementById("results").innerHTML = response;
				//window.location = url;
			}

			function showAllStations()
			{
				var url = base_url + "/stations";
				window.location = url;
			}

			function showAllBookings()
			{
				var url = base_url + "/bookings";
			}

			function login()
			{
				var l = prompt("Your login here:");
				var btn = document.getElementById("loginbutton");
				btn.value = "logout";
				btn.onclick = logout;
				addButtons();
			}
	
			function logout()
			{
				var btn = document.getElementById("loginbutton");
				btn.value = "login";
				btn.onclick = login;
				removeButtons();
			}

			function addButtons()
			{
				var acc_inf = document.createElement("input");
				acc_inf.setAttribute("id", "accbtn");
				acc_inf.setAttribute("type", "button");
				acc_inf.setAttribute("value", "show accountinformation");
				acc_inf.setAttribute("onclick", "showAccInfo();");
				var func_div = document.getElementById("functions");
				func_div.appendChild(acc_inf);
			}

			function removeButtons()
			{
				var acc_inf = document.getElementById("accbtn");
				acc_inf.parentNode.removeChild(acc_inf);
			}

		</script>
	</head>
	<body>
		<div id="headdiv" style="padding-left:10px;">
			<h1>Willkommen bei Fahrrad-Fritz</h1>
			<p>Bei uns können Sie Fahrräder online mieten und offline fahren.</p>
		</div>
		<div id="functions" style="background:#808080;padding-bottom:2px;padding-top:2px;padding-left:10px;">
			<input type="button" value="show all bikes" onclick="showAllBikes();"/>
			<input type="button" value="show all stations" onclick="showAllStations();"/>
			<input type="button" value="show all bookings" onclick="showAllBookings();"/>
			<input id="loginbutton" type="button" value="login" style="position:absolute;right:20px;" onclick="login();"/>
		</div>

		<div id="results" style="height:100px;">
		</div>

		<div id="bottomdiv" style="background:#808080;padding-bottom:2px;padding-top:1px;padding-left:10px;">
			<a href="">contact</a>
			<a href="">impressum</a>
		</div>
	</body>
</html>
